<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Food Rescue Platform - Login / Signup</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg,#f8f5f2,#f8f5f2);
      display: flex;
      height: 100vh;
    }
    .container { display: flex; width: 100%; }
    .left {
      flex: 1;
      background: url('foodsave.webp') center/cover no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      padding: 40px;
      text-align: center;
      position: relative;
    }
    .left::after {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
    }
    .left-content { position: relative; z-index: 2; }
    .left h1 { font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 15px; }
    .left p { font-size: 1.1rem; opacity: 0.9; }

    .right {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
      flex-direction: column;
    }

    .back-home {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      cursor: pointer;
      text-decoration: none;
      color: #4CAF50;
      font-weight: 600;
      font-size: 14px;
      transition: 0.3s;
    }
    .back-home i { margin-right: 8px; font-size: 16px; }
    .back-home:hover { color: #43a047; }

    .auth-box {
      background:#f8f5f2;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(5, 0, 0, 0.1);
      width: 100%;
      max-width: 400px;
      position: relative;
    }
    .tabs {
      display: flex;
      justify-content: space-around;
      margin-bottom: 25px;
      border-bottom: 1px solid #ddd;
    }
    .tab {
      flex: 1;
      text-align: center;
      padding: 12px;
      cursor: pointer;
      font-weight: 500;
      transition: 0.3s;
    }
    .tab.active { border-bottom: 3px solid #4CAF50; color: #4CAF50; }
    form { display: none; flex-direction: column; }
    form.active { display: flex; }
    label { font-size: 14px; margin: 10px 0 5px; text-align: left; font-weight: 500; }
    .input-group { position: relative; margin-bottom: 15px; }
    .input-group i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #888;
    }
    .input-group input, .input-group select {
      padding: 12px 12px 12px 40px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 14px;
      width: 100%;
      transition: 0.3s;
    }
    .input-group input:focus, .input-group select:focus {
      border-color: #4CAF50;
      outline: none;
      box-shadow: 0 0 6px rgba(76,175,80,0.2);
    }
    button {
      padding: 14px;
      border: none;
      border-radius: 10px;
      background: #4CAF50;
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover { background: #43a047; transform: translateY(-2px); }
    .dynamic-fields { display: none; }
    .dynamic-fields.active { display: block; }
  </style>
</head>
<body>
  <div class="container">
    <!-- Left Section -->
    <div class="left">
      <div class="left-content">
        <h1>Join the Food Rescue Movement</h1>
        <p>Every signup helps reduce waste and feed communities. Together, we can build a sustainable future.</p>
      </div>
    </div>

    <!-- Right Section -->
    <div class="right">
      <a href="HomePage.html" class="back-home">
        <i class="fa-solid fa-house"></i> ‚Üê Return to Home
      </a>

      <div class="auth-box">
        <div class="tabs">
          <div class="tab active" onclick="switchTab('login')">Login</div>
          <div class="tab" onclick="switchTab('signup')">Signup</div>
        </div>

        <!-- Login Form -->
        <form id="login" class="active">
          <label>Email</label>
          <div class="input-group">
            <i class="fa-solid fa-envelope"></i>
            <input type="email" id="loginEmail" placeholder="Enter your email" required>
          </div>
          <label>Password</label>
          <div class="input-group">
            <i class="fa-solid fa-lock"></i>
            <input type="password" id="loginPassword" placeholder="Enter your password" required>
          </div>
          <button type="submit">Login</button>
        </form>

        <!-- Signup Form -->
        <form id="signup">
          <label>Select User Type</label>
          <div class="input-group">
            <i class="fa-solid fa-user"></i>
            <select id="userType" onchange="showFields()" required>
              <option value="">-- Choose --</option>
              <option value="private">Private User</option>
              <option value="organization">Organization</option>
            </select>
          </div>

          <!-- Common Fields -->
          <div id="commonFields">
            <label>Name</label>
            <div class="input-group">
              <i class="fa-solid fa-id-card"></i>
              <input type="text" id="signupName" placeholder="Enter your name" required>
            </div>
            <label>Email</label>
            <div class="input-group">
              <i class="fa-solid fa-envelope"></i>
              <input type="email" id="signupEmail" placeholder="Enter your email" required>
            </div>
            <label>Password</label>
            <div class="input-group">
              <i class="fa-solid fa-lock"></i>
              <input type="password" id="signupPassword" placeholder="Enter a password" required>
            </div>
          </div>

          <!-- Private User Fields -->
          <div id="privateFields" class="dynamic-fields">
            <label>Location</label>
            <div class="input-group">
              <i class="fa-solid fa-location-dot"></i>
              <input type="text" placeholder="Enter your city">
            </div>
            <label>Preferred Role</label>
            <div class="input-group">
              <i class="fa-solid fa-people-carry-box"></i>
              <select>
                <option>Food Donor</option>
                <option>Food Receiver</option>
                <option>Volunteer</option>
              </select>
            </div>
          </div>

          <!-- Organization Fields -->
          <div id="organizationFields" class="dynamic-fields">
            <label>Organization Name</label>
            <div class="input-group">
              <i class="fa-solid fa-building"></i>
              <input type="text" placeholder="Enter organization name">
            </div>
            <label>Type of Organization</label>
            <div class="input-group">
              <i class="fa-solid fa-warehouse"></i>
              <select>
                <option>NGO</option>
                <option>Restaurant</option>
                <option>Shelter</option>
                <option>Retailer</option>
              </select>
            </div>
            <label>Registration Number</label>
            <div class="input-group">
              <i class="fa-solid fa-hashtag"></i>
              <input type="text" placeholder="Enter registration/license number">
            </div>
          </div>

          <button type="submit">Signup</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    function switchTab(tab) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('form').forEach(f => f.classList.remove('active'));
      document.querySelector('.tab:nth-child(' + (tab === 'login' ? 1 : 2) + ')').classList.add('active');
      document.getElementById(tab).classList.add('active');
    }

    function showFields() {
      let type = document.getElementById('userType').value;
      document.getElementById('privateFields').classList.remove('active');
      document.getElementById('organizationFields').classList.remove('active');
      if (type === 'private') {
        document.getElementById('privateFields').classList.add('active');
      } else if (type === 'organization') {
        document.getElementById('organizationFields').classList.add('active');
      }
    }

    // Helper to save/retrieve users list
    function getUsers() {
      return JSON.parse(localStorage.getItem("users") || "[]");
    }
    function saveUsers(users) {
      localStorage.setItem("users", JSON.stringify(users));
    }

    // Signup handler
    document.getElementById("signup").addEventListener("submit", function(e) {
      e.preventDefault();
      const name = document.getElementById("signupName").value;
      const email = document.getElementById("signupEmail").value;
      const password = document.getElementById("signupPassword").value;
      const userType = document.getElementById("userType").value;

      if (!userType) {
        alert("Please select a user type.");
        return;
      }

      let users = getUsers();

      // prevent duplicate emails
      if (users.find(u => u.email === email)) {
        alert("User already exists. Please login instead.");
        return;
      }

      users.push({ name, email, password, userType });
      saveUsers(users);

      localStorage.setItem("currentUser", JSON.stringify({ email, userType }));

      if (userType === "private") {
        window.location.href = "Private Dashboard.html";
      } else {
        window.location.href = "Food Marketplace.html";
      }
    });

    // Login handler
    document.getElementById("login").addEventListener("submit", function(e) {
      e.preventDefault();
      const email = document.getElementById("loginEmail").value;
      const password = document.getElementById("loginPassword").value;

      let users = getUsers();
      let user = users.find(u => u.email === email && u.password === password);

      if (!user) {
        alert("Invalid email or password.");
        return;
      }

      localStorage.setItem("currentUser", JSON.stringify({ email: user.email, userType: user.userType }));

      if (user.userType === "private") {
        window.location.href = "Private Dashboard.html";
      } else {
        window.location.href = "Food Marketplace.html";
      }
    });

    // Removed auto-login to prevent unwanted redirects
    // Users must explicitly login through the form

  </script>
</body>
</html> 